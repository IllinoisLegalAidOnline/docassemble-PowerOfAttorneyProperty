metadata:
  title: Power of attorney for property
  short title: POA property
  comment: This program helps you create documents to give another person access or control of your money and property.
  authors:
    - Vivian McNaughton
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALToolbox:phone-number-validation.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
#features:
#  css: youtube_test.css
---
objects:
  - principal: ALIndividual
  - agent: ALIndividual
  - delegate: ALIndividual
  - preparer: ALIndividual
  - successors: ALPeopleList.using(
        object_type=ALIndividual,
        complete_attribute='complete',
        there_are_any=True)
---
code: |
  ilao_easy_form_title = "Power of attorney for property"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/power-attorney-property"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-PowerOfAttorneyProperty'
---
# Road map
sections:
  - section_intro: Start
  #- section_qualify: Do you qualify?
  - section_principal: Principal
  - section_agent: Agent
  - section_powers: Powers
  - section_successors: Successor agents
  - section_other: Other information
  - section_download: Download
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  snapshot_start
  set_progress(5)
  poa_explainer
  about_agents
  how_to_use
  accept_terms
  completion_guide
  nav.set_section('section_principal')
  if for_yourself == False:
    other_principal
  principal.name.first
  grammar_code
  if in_illinois == False:
    illinois_kickout
  set_progress(20)
  principal.address.address
  nav.set_section('section_agent')
  agent.name.first
  agent.in_america
  agent.phone_number
  nav.set_section('section_powers')
  which_powers
  set_progress(40)
  life_insurance
  file_bankruptcy
  is_guardian
  if which_powers['social']:
    if ssn_authority:
      ssa_info
      #principal_ssn
      principal_phone
  birth_date
  set_progress(60)
  if agent_limitations == True:
    agent_limits
  additional_powers
  if no_powers == True:
    no_powers_kickout
  delegate_decisions 
  agent_compensation
  nav.set_section('section_successors')
  if any_successors == True:
    successors.gather()
  #This program currently does not ask about witnesses because the statutory short form only seems to have space for their signatures. If we end up using a different form, this may change. 
  nav.set_section('section_other')
  set_progress(80)
  effective_date_choice
  if end_at_death == False:
    end_date_choice
  if not for_yourself:
    preparer.name.first
    preparer.address.address
    preparer.phone_number
  set_progress(100)
  if which_powers['social']:
    if ssn_authority:
      release_logic
      release_reminder
  nav.set_section('section_download')
  
  forms_assembling
  snapshot_forms
  get_docs_screen
---
code: |
  stuff_to_snapshot = {
  	'start_time': str(current_datetime().format_datetime()),
  	'started_interview': True, 
  	}
  
  try:
    stuff_to_snapshot['ip_address'] = device(ip=True)
  except:
    pass
  
  stuff_to_snapshot['user_zip'] = showifdef('users[0].address.zip')

  stuff_to_snapshot['downloaded_forms'] = showifdef('forms_assembling')
  
  stuff_to_snapshot['user_is_principal'] = showifdef('for_yourself')
  
  store_variables_snapshot(
  	data=stuff_to_snapshot, persistent=True
  	)
  snapshot_interview_state = True
---
code: |
  snapshot_interview_state
  snapshot_start = True  
---
code: |
  reconsider('snapshot_interview_state')
  snapshot_forms = True
---
id: welcome
question: |
  Power of attorney for property
subquestion: |
  Welcome to Illinois Legal Aid Online's **Power of attorney for property** Easy Form.

  This program helps you create documents to give someone you trust power of attorney for your property. This means they will have access to or control of your money and property.
  
  To learn more, read ILAO's article about [**starting a power of attorney for property**](https://www.illinoislegalaid.org/legal-information/starting-power-attorney-property).
field: sees_nav_bar
---
template: video_intro
subject: |
  **Video: Intro to Power of Attorney for Property**
content: |  
  [YOUTUBE -1pMMIe4hb4]
---
template: video_why
subject: |
  **Video: Why I made a Power of Attorney for Property and Finances**
content: |  
  [YOUTUBE -1pMMIe4hb4]
---
#First Video Intro to Power of Attorney for Property
#Second video: Why I made a Power of Attorney for Property and Finances"
id: poa explainer
continue button field: poa_explainer
question: |
  About Power of Attorney
subquestion: |
  [YOUTUBE -1pMMIe4hb4]
  
  A Power of Attorney for property lets you choose a person you trust to make decisions about your property for you. The person you choose will be able to make decisions about your property for you when you can't make decisions for yourself. Someone with this power is called an "agent."

  You can give an agent power to:

  * Make sure your bills are paid
  * Sign or break a lease
  * Keep up with mortgage payments
  * Hire a lawyer for you
  * Talk to the Social Security office
  * File your taxes

  ${collapse_template(video_why)}
---
id: instructions
continue button field: how_to_use
question: |
  Instructions
subquestion: |  
  To use this program you will need to know:

  * The name, address, and phone number of the person you want to designate as the agent with power of attorney,
  * The names, address, and phone numbers of any successor agents, 
  * The property and finances you have, and
  * How much control you want the agent to have over your property.
    
  Set aside 15 to 30 minutes to finish this program, aa=nd an additional 15? minutes if you watch the instructional videos. You can log in and save your work to return to later. 
  
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some questions have a question mark in a circle ${ fa_icon("question-circle", color_css="#0DCAF0" ) } that also gives help.
---
template: help_example

subject: |

  **You can expand sections like this to show more information.**

content: |  

  This is an example of help. Click again to hide.
---
template: get_legal_help
subject: |
  **What if I need legal advice?**
content: |  
  If you have questions or concerns about your legal problem and want legal advice you should talk to a lawyer.
 
  Use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help) to find free or low-cost legal services in your area.
---
template: video_agent
subject: |
  **Video: Who should I pick as my agent?**
content: |
  [YOUTUBE -1pMMIe4hb4]
---
#Add video Who should I pick as my agent?
id: about agents
continue button field: about_agents
question: |
  About agents
subquestion: |
  Your agent is a person you trust and choose to make decisions about your property for you, if you ever need help. 

  The agent must be at least 18 years old. The agent does not have to be a family member but it should be someone you trust. Your agent does not need to be a United States citizen. 

  You can select successor agents as backup if the first agent becomes unable to make these decisions.

  ${collapse_template(video_agent)}

  **Note:** If you can communicate your choices, you are the decision maker.

  To learn more, read ILAO's article about [**setting up a Power of Attorney for Property**](https://www.illinoislegalaid.org/legal-information/setting-power-attorney-property).
---
id: completion guide
question: |
  Completing this form
subquestion: |
  At the end of the program, you can download your Power of Attorney for Property.  
  
  **Note:** the Power of Attorney for Property is not valid until it is signed in front of a notary and a witness. Most pages in the form will need to be initialed.
  
  Be sure to download and read the instructions at the end of the program.
continue button field: completion_guide
---
id: for yourself
question: |
  Are you making these forms for yourself?
subquestion: |
  In other words, are you the **{principal}** who wants to designate an **{agent}**?

  If you are making these forms for someone else, that person will be the principal.
field: for_yourself
choices:
  - Yes, I am making a power of attorney for myself.: True
  - No, I am making a power of attorney for somebody else.: False
#fields:
#  - no label: for_yourself
#    datatype: yesnoradio
terms:
  principal: |
    The **principal** is the person who chooses someone they trust to make decisions about their property. If this is your document, you are the principal. 

  agent: |
    The **agent** is the person the principal trusts and chooses to make decisions about their property for them, if the principal ever needs help. If this is your document, you are giving the agent power to make decisions about your property for you, if you ever need help.
---
depends on: 
  - for_yourself
  - principal.name.first
  - principal.name.middle
  - principal.name.last
  - principal.name.suffix
code: |
  if for_yourself:
    my_their = "my"
    my_subject = "my"
    your_their = "your"
    your_subject = "your"
    do_does = "do"
    you_subject = "you"
    i_subject = "I"
    myself_their_self = "myself"
    yourself_their_self = "yourself"
    am_is = "am"
    have_has = "have"
    i_they = "I"
    me_subject = "me"
    me_them = "me"
    am_are = "am"
    you_they = "you"
  else:
    my_their = "their"
    my_subject = principal.name.full(middle='full')
    my_subject += "'s"
    your_subject = principal.name.full(middle='full')
    your_subject += "'s"
    your_their = "their"
    you_subject = principal.name.full(middle='full')
    i_subject = principal.name.full(middle='full')
    do_does = " does"
    myself_their_self = "their self"
    yourself_their_self = "their self"
    am_is = "is"
    have_has = "has"
    i_they = "they"
    me_subject = principal.name.full(middle='full')
    me_them = "them"
    am_are = "are"
    you_they = "they"
  grammar_code = True
---
id: forgery warning
question: |
  
---
id: other principal notice
continue button field: other_principal
question: |
  Making a Power of Attorney for someone else
subquestion: |
  You can use this program for someone other than yourself, but that person:
  
  * Must have directed you to make a Power of Attorney for Property, 
  * Must know their income and assets,
  * Must choose what powers they want to give their agent, and
  * Must have legal capacity, which means know what they are signing and what it means for their future.
  
  When you help someone make a Power of Attorney for Property form, you must follow their express wishes. **They should be with you, providing information and making decisions as you make the form.** If they cannot understand what they are signing or tell you their wishes, you should not use this program. 
  
  **Warning:** If you make a Power of Attorney for someone else, and the form does not follow their instructions, you could face legal consequences. You could be charged with identity theft, forgery, elder abuse, or other crimes which can be punished with jail time.
---
id: principal name
question: |
  % if for_yourself == True:
  What is your name?
  % else:
  What is the principal's name?
  % endif
subquestion: |
  % if for_yourself == False:
  The principal is the person who chooses an agent to make decisions about the their money and property.

  You should use the legal name on their identification.
  % else:
  You should use the legal name on your identification.
  % endif
fields:
  - First: principal.name.first
  - Middle: principal.name.middle
    required: False
  - Last: principal.name.last
  - Suffix: principal.name.suffix
    required: False
---
id: in illinois
question: |
  % if for_yourself == True:
  Are you a resident of Illinois?
  % else:
  Is ${principal.name.full(middle='full')} a resident of Illinois?
  % endif
fields:
  - no label: in_illinois
    datatype: yesnoradio
---
id: illinois kickout
event: illinois_kickout
question: |
  Sorry
subquestion: |
  % if for_yourself == True:
  You must be an Illinois resident to use this form.
  % else:
  ${principal.name.full(middle='full')} must be an Illinois resident to use this form.
  % endif
  
  If you do not live in Illinois, use [**the Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization near you.
buttons:
  - Exit: exit
  - Restart: restart
---
id: no powers kickout
event: no_powers_kickout
question: |
  Sorry
subquestion: |
  % if for_yourself == True:
  You have not given ${agent.name.full(middle='full')} any power over your property. This form is intended for giving someone power of attorney over your property.
  % else:
  You have not given ${agent.name.full(middle='full')} any power over ${principal.name.full(middle='full')}'s property. This form is intended for giving someone power of attorney over their property.
  % endif
  Please use the back button or the review buttons to change your answers.
buttons:
  - Exit: exit
  - Restart: restart
---
depends on:
  - which_powers
  - life_insurance
  - file_bankruptcy
  - is_guardian
  - ssn_authority
  - additional_powers
code: |
  no_powers = False
  if which_powers.all_false() == True:
    if life_insurance == False:
      if file_bankruptcy == False:
        if is_guardian == False:
          if additional_powers.all_false():
            no_powers = True
---
id: principal address
question: |
  % if for_yourself == True:
  What is your address?
  % else:
  What is ${principal.name.full(middle='full')}'s address?
  % endif
fields:
  - Street address: principal.address.address
    address autocomplete: True
  - Address line 2: principal.address.unit
    required: False
  - City: principal.address.city
  - State: principal.address.state
    code: |
      states_list() 
  - ZIP code: principal.address.zip
---
id: agent name
question: |
  % if for_yourself == True:
  Who do you want to name as your agent?
  % else:
  Who does ${principal.name.full(middle='full')} want to name as their agent?
  % endif
subquestion: |
  ${collapse_template(video_agent)}
  
  % if for_yourself == False:
  The agent is the person who will make decisions about ${principal.name.full(middle='full')}'s money or property. 
  
  An agent has a lot of power that they could potentially abuse. ${principal.name.full(middle='full')} should choose someone who they would trust with their life and everything they own.

  The agent is the person you trust to make decisions about  ${principal.name.full(middle='full')}'s' property for them. It is very important they talk to their agent about their wishes for their property and finances. Meaningful conversations will guide the agent's judgment and make sure they are on the same page.

  An agent has a lot of power, and it is possible that they could abuse that power.  ${principal.name.full(middle='full')} should choose someone they trust with their finances and everything they own.
  % else:
  Your agent is the person you trust to make decisions about your property for you. It is very important to talk to your agent about your wishes for your property and finances. Meaningful conversations with you will guide their judgment and make sure you are on the same page.

  An agent has a lot of power, and it is possible that they could abuse that power. You should choose someone you trust with your finances and everything you own.
  % endif
fields:
  - First: agent.name.first
  - Middle: agent.name.middle
    required: False
  - Last: agent.name.last
---
id: agent address
question: |
  Enter ${agent.name.full(middle='full')}'s address
subquestion: |
  ${collapse_template(intl_address_help)}
fields:
  - Does ${agent.name.full(middle='full')} have a United States address?: agent.in_america
    datatype: yesnoradio
    default: True
    help: |
      Click **No** if you want to list an address outside the United States. You should enter the international address using the English alphabet.
  - Street address: agent.address.address
    address autocomplete: True
    required: False
    show if: agent.in_america
  - Address line 2: agent.address.unit
    required: False
    show if: agent.in_america
  - City: agent.address.city
    show if: agent.in_america
  - State: agent.address.state
    show if: agent.in_america
    code: |
      states_list() 
  - ZIP code: agent.address.zip
    required: False
    show if: agent.in_america
  - Non-US address line 1 (street address, apartment number): agent.intl_address_1
    required: False
    show if: 
      variable: agent.in_america
      is: False
  - Non-US address line 2 (city, province or state, postal code, country): agent.intl_address_2
    show if: 
      variable: agent.in_america
      is: False
---
template: intl_address_help
subject: |
  **What if my agent does not have a United States address?**
content: |
  You are able to list someone outside of the United States as your agent. Your agent does not need to be a United States citizen. However, there may issues if a bank or financial organization is unable to reach them. You may want to ask a lawyer for advice. Use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help) to find free or low-cost legal services in your area.
  
  For international addresses, there will be space for two lines to enter the address. You should enter the international address using the English alphabet.
---
id: agent phone
question: |
  What is ${agent.name.full(middle='full')}'s phone number?
subquestion: |
  % if for_yourself:
   A valid phone number is required so your agent can be contacted.
  % else:
   A valid phone number is required so ${principal.name.full(middle='full')}'s agent can be contacted.
   % endif
fields:
  - Phone number: agent.phone_number
    datatype: al_international_phone
---
template: video_agent_powers
subject: |
  **Video: What powers am I giving my agent?**
content: |
  [YOUTUBE -1pMMIe4hb4]
---
#Add video "What powers am I giving my agent?"
id: which powers
question: |
  % if for_yourself == True:
  What do you want ${agent.name.full(middle='full')} to have power over?
  % else:
  What does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to have power over?
  % endif
subquestion: |
  ${collapse_template(video_agent_powers)}
  
  % if for_yourself:
  A Power of Attorney for property usually gives an agent power over all the principal's property. If you want ${agent.name.full(middle='full')} to make decisions about all your property, you can click **All of the above**.
  %  else:
   A Power of Attorney for property usually gives an agent power over all the principal's property. If ${principal.name.full(middle="full")} wants ${agent.name.full(middle='full')} to make decisions about all their property, you can click **All of the above**.
  % endif

  If you do not check an option, ${agent.name.full(middle='full')} will not be able to help with it. 
fields: 
  - no label: which_powers
    datatype: checkboxes
    all of the above: True
    none of the above: True
    choices:
      - Real estate transactions: real
        help: |
          Some examples of **real estate transactions** are buying a house or renting an apartment.
      - Financial institution transactions: financial
        help: |
          Some examples of **financial institution transactions** are depositing or taking out money from an account or writing checks.
      - Stock and bond transactions: stock
        help: |
          Some examples of **stock and bond transactions** are buying stock and safekeeping any interest or shares of that stock.
      - Tangible personal property transactions: tangible
        help: |
          Personal property means physical things like furniture, jewelry, or pictures.

          Some examples of **tangible personal property transactions** are selling furniture, storing pictures, and repairing appliances.
      - Safe deposit transactions: safe
        help: |
          Some examples of **safe deposit transactions** are renewing safe deposits, closing the safe deposit, or being able to get into the safe deposit box.
      - Insurance and annuity transactions: insurance
        help: |
          Some examples of **insurance and annuity transactions** are buying health insurance, paying for car insurance, or ending life insurance.
      - Retirement plan transactions: retirement
        help: |
          Some examples of **retirement plan transactions** are putting money into a retirement plan, or taking money out of a retirement plan or an employee savings account.
      - Social Security, employment and military service benefits: social
        help: |
          Some examples of **Social Security, unemployment, and military service benefit transactions** are filing applications for these services or filing or settling any claims regarding these services.
      - Tax matters: tax
        help: |
          An example of a **tax matter** is filing federal and state income tax returns.
      - Claims and litigation: claims
        help: |
          Some examples of **claims and litigation** are the power to sue someone, to settle a claim, or to hire an attorney.
      - Commodity and option transactions: commodity
        help: |
          Some examples of **commodity and option transactions** are buying stock options and continuing to use a stock broker.
      - Business operations: business
        help: |
          Some examples of **business transactions** are selling, expanding, or remodeling the principal's business. For example, if the principal owned a store, then the agent could sell the store, make the store bigger, or remodel it. The agent could also hire or fire employees.
      - Borrowing transactions: borrowing
        help: |
          Some examples of **borrowing transactions** are taking out a loan in the principal's name, paying any current loans, or taking out a mortgage on the principal's home.
      - Estate transactions: estate
        help: |
          Some examples of **estate transactions** are accepting money or a gift on behalf of the principal.
      - All other property transactions: all
        help: |
          By selecting **all other property transactions**, the agent can perform any transaction with the principal's property even if is not listed above.
---
id: life insurance
question: |
  % if for_yourself == True:
  Do you want ${agent.name.full(middle='full')} to have power to change your life insurance beneficiaries?
  % else:
  Does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to have power to change their life insurance beneficiaries?
  % endif
fields:
  - no label: life_insurance
    datatype: yesnoradio
---
id: bankruptcy
question: |
  % if for_yourself == True:
  Do you want ${agent.name.full(middle='full')} to have power to file a bankruptcy on your behalf?
  % else:
  Does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to have power to file a bankruptcy on ${principal.name.full(middle='full')}'s behalf?
  % endif
fields:
  - no label: file_bankruptcy
    datatype: yesnoradio
---
id: social security authority
question: |
  % if for_yourself == True: 
  Do you want the Social Security Administration to release information to ${agent.name.full(middle='full')}?
  
  Do you want ${agent.name.full(middle='full')} to have power to discuss matters with the Social Security Administration?
  % else:
  Does ${principal.name.full(middle='full')} want the Social Security Administration to release information to ${agent.name.full(middle='full')}?
  % endif
subquestion: |
  If you click **Yes**, a Consent for Release of Information form will be created in addition to this Power of Attorney for Property.

  If you click **No**, ${agent.name.full(middle='full')} might not be able to make decisions about Social Security.
fields:
  - no label: ssn_authority
    datatype: yesnoradio
---
#id: ssn
#question: |
#  % if for_yourself:
#  What is your Social Security number?
#  % else:
#  What is ${principal.name.full(middle='full')}'s Social Security number?
#  % endif
#subquestion: |
#  % if for_yourself:
#  The Consent for Release of Information form needs to list your Social Security number.
#  % else:
#  The Consent for Release of Information form needs to list ${principal.name.full(middle='full')}'s Social Security number.
#  % endif
#fields:
#  - Social Security number: principal_ssn
#    maxlength: 12
---
id: ssa release completion reminder
continue button field: release_reminder
question: |
  Completing the Consent for Release of Information form
subquestion: |
  ${capitalize(you_subject)} will need to add ${your_their} Social Security number to the Consent for Relase of Information form before signing it. ${capitalize(you_subject)} will need to sign it in front of two witnesses and include those witnesses' signatures and addresses.

  % if any_successors and successors.number_gathered() > 1:
  The witnesses must be at least 18 years old. ${agent.name.full(middle='full')}, ${successors.full_names()} cannot be witnesses.
  % elif any_successors and successors.number_gathered() == 1:
  The witnesses must be at least 18 years old. ${agent.name.full(middle='full')} and ${successors.full_names()} cannot be witnesses.
  % else:
  The witnesses must be at least 18 years old. ${agent.name.full(middle='full')} cannot be a witness.
  % endif

  Once you have completed and signed the form, follow the included instructions to send it to the Social Security Administration.
---
id: principal phone
question: |
  % if for_yourself:
  What is your phone number?
  % else:
  What is ${principal.name.full(middle='full')}'s phone number?
  % endif
subquestion: |
  % if for_yourself:
  Listing your phone number on the Consent for Release of Information form helps the Social Security Administration contact you.
  % else:
  Listing ${principal.name.full(middle='full')}'s phone number on the Consent for Release of Information form helps the Social Security Administration contact them.
  % endif
fields:
  - Phone number: principal_phone
    datatype: al_international_phone
---
id: social security information
question: |
  % if for_yourself:
  What information do you want the Social Security Administration to release to ${agent.name.full(middle='full')}?
  % else:
  What information does ${principal.name.full(middle='full')} want the Social Security Administration to release to ${agent.name.full(middle='full')}?
  % endif
fields:
  - no label: ssa_info
    datatype: checkboxes
    none of the above: False
    all of the above: True
    choices:
      - Verification of Social Security Number: verify
      - Current monthly Social Security benefit amount: current_benefit
      - Current monthly Supplemental Security Income payment amount: current_supplement
      - Past Social Security benefit amounts (Explain below): past_benefits
      - Past Supplemental Security Income payment amounts (Explain below): past_supplement
      - Medicare entitlement (Explain below): medicare
      - Medical records (Explain below): medical
      - Other Social Security records (Explain below): other
  - note: What time range of past Social Security benefit amounts do you want to release?
    show if: ssa_info['past_benefits']
  - From: benefit_start_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    show if: ssa_info['past_benefits']
  - To: benefit_end_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    show if: ssa_info['past_benefits']
  - note: What time range of past Supplemental Social Security Income payment amounts do you want to release?
    show if: ssa_info['past_supplement']
  - From: supplemental_start_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    show if: ssa_info['past_supplement']
  - To: supplemental_end_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    show if: ssa_info['past_supplement']
  - note: What time range of Medicare entitlements do you want to release?
    show if: ssa_info['medicare']
  - From: medicare_start_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    show if: ssa_info['medicare']
  - To: medicare_end_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    show if: ssa_info['medicare']
  - Do you want all medical records released, or just some medical records?: complete_or_dates
    input type: radio
    show if: ssa_info['medical']
    choices:
      - All medical records: complete
      - Some medical records (Explain below): dates
  - note: What time range of medical records do you want to release?
    js show if:
      val("complete_or_dates") === "dates"
  - From: medical_records_start_date
    min: 08/14/1935
    max: ${ today() }
    datatype: date
    js show if:
      val("complete_or_dates") === "dates"
  - To: medical_records_end_date
    datatype: date
    min: 08/14/1935
    max: ${ today() }
    js show if:
      val("complete_or_dates") === "dates"
  - Other records: other_records_text
    input type: area
    maxlength: 250
    show if: ssa_info['other']
    help: |
      This could include award notices, denial notices, benefit applications, appeals, or any other records.
validation code: |
  if ssa_info['past_benefits'] and defined('benefit_start_date') and defined('benefit_end_date'):
    if benefit_start_date > benefit_end_date:
      validation_error("The start date must be before the end date.", field="benefit_end_date")
  if ssa_info['past_supplement'] and defined('supplemental_start_date') and defined('supplemental_end_date'):
    if supplemental_start_date > supplemental_end_date:
      validation_error("The start date must be before the end date.", field="supplemental_end_date")
  if ssa_info['medicare'] and defined('medicare_start_date') and defined('medicare_end_date'):
    if medicare_start_date > medicare_end_date:
      validation_error("The start date must be before the end date.", field="medicare_end_date")
  if ssa_info['medical'] and complete_or_dates == "dates" and defined('medical_records_start_date') and defined('medical_records_end_date'):
    if medical_records_start_date > medical_records_end_date:
      validation_error("The start date must be before the end date.", field="medical_records_end_date")
---
id: date of birth
question: |
  % if for_yourself == True:
  What is your date of birth?
  % else:
  What is ${principal.name.full(middle='full')}'s date of birth?
  % endif
fields:
  - Birth date: birth_date
    max: ${ today() }
    datatype: ThreePartsDate
---
id: agent limitation
question: |
  % if for_yourself == True:
  Do you want to set special rules to limit ${agent.name.full(middle='full')}'s powers?
  % else:
  Does ${principal.name.full(middle='full')} want to set special rules to limit ${agent.name.full(middle='full')}'s powers?
  % endif
subquestion: |
  % if for_yourself == True:
  You may limit any of the powers given to an agent. You may also list any specific powers you do not want the agent to have.
  % else:
  ${principal.name.full(middle='full')} may limit any of the powers given to an agent. They may also list any specific powers they do not want the agent to have.
  % endif
fields:
  - no label: agent_limitations
    datatype: yesnoradio
---
id: agent limits
question: |
  % if for_yourself == True:
  What limits or special rules do you want to include?
  % else:
  What limits or special rules does ${principal.name.full(middle='full')} want to include?
  % endif
subquestion: |
  % if for_yourself == True:
    For example, you can place conditions on the sale of real estate or make special rules on borrowing by ${agent.name.full(middle='full')}.
  % else:
  For example, they can place conditions on the sale of real estate or make special rules on borrowing by ${agent.name.full(middle='full')}.
  % endif
fields:
  - Limits: agent_limits
    input type: area
    maxlength: 500
    rows: 6
---
#id: any additional powers
#question: |
#  % if for_yourself == True:
#  Do you want to give any additional powers to ${agent.name.full(middle='full')}?
#  % else:
#  Does ${ principal.name.full(middle='full')} want to give any additional powers to ${agent.name.full(middle='full')}?
#  % endif
#subquestion: |
#  % if for_yourself == True:
#  If desired, you may give other powers to ${agent.name.full(middle='full')}. These powers will be in addition to the ones already provided.
#  % else:
#  If desired, ${principal.name.full(middle='full')} may give other powers to ${agent.name.full(middle='full')}. These powers will be in addition to the ones already provided.
#  % endif
#
#  Other powers may include: 
#  
#  * The power to give my property to others as gifts, 
#  * The power to exercise powers of appointment 
#  * The power to name or change beneficiaries or joint tenants, or 
#  * The power to revoke or amend any trust. 
#  
#  If ${agent.name.full(middle='full')} is given the authority to revoke or amend a trust, the name of the trust must be specifically identified.
#fields:
#  - no label: any_additional_powers
#    datatype: yesnoradio
#---
#id: additional powers
#question: |
#  Complete the sentence: "In addition to the powers granted above, ${agent.name.full(middle='full')} is granted the following powers: "
#subquestion: |
#  For example: The agent will have the right to transfer my money from my savings account to my checking account.
#fields:
#  - Additional powers: additional_powers
#    input type: area
---
id: any additional powers
question: |
  % if for_yourself == True:
  Do you want to give any additional powers to ${agent.name.full(middle='full')}?
  % else:
  Does ${ principal.name.full(middle='full')} want to give any additional powers to ${agent.name.full(middle='full')}?
  % endif
subquestion: |
  % if for_yourself == True:
  If you want, you may give other powers to ${agent.name.full(middle='full')}. These powers will be in addition to the ones already provided.
  % else:
  If ${principal.name.full(middle='full')} wants, they may give other powers to ${agent.name.full(middle='full')}. These powers will be in addition to the ones already provided.
  % endif 
fields:
  - no label: additional_powers
    all of the above: True
    none of the above: False
    datatype: checkboxes
    choices: 
      - The power to give my property to others as gifts: gifts
      - The power to exercise powers of appointment.: appointment
      - The power to name or change beneficiaries or joint tenants: name
      - The right to access my social media accounts.: social
      - The right to access my online accounts, such as online banking, utilities, and bill pay.: online
      - The power to revoke or amend a trust.: trust
        help: |
          If ${agent.name.full(middle='full')} is given the authority to revoke or amend a trust, the name of the trust must be specifically identified. ${capitalize(you_subject)} may want to talk to an attorney before giving ${agent.name.full(middle='full')} power over a trust.
      - Another power (Explain below): other
  - Name of trust: trust_name
    maxlength: 50
    show if: additional_powers["trust"]
  - In addition to the powers granted above, ${agent.name.full(middle='full')} is granted the following powers:: additional_powers_text
    show if: additional_powers["other"]
    input type: area
    maxlength: 500
    rows: 6
---
id: delegate decisions
question: |
  % if for_yourself == True:
  Do you want ${agent.name.full(middle='full')} to be able to delegate their power of attorney to another person?
  % else:
  Does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to be able to delegate their power of attorney to another person?
  % endif
subquestion: |
  As your agent, ${agent.name.full(middle='full')}, has the authority to ask other people to help them handle your affairs, such as hiring a tax specialist or a real estate agent. This is part of your agent's decision-making authority. However, you can also give your agent the power to let other people make decisions for you. This is called "delegating decision-making power."

  For example, if ${agent.name.full(middle='full')} was out of the country and you gave them this power, they could pick someone else to make decisions for you.
fields:
  - no label: delegate_decisions
    input type: radio
    choices:
      - No, only ${agent.name.full(middle='full')} can make decisions for ${me_subject}.: agent_only 
      - Yes, ${agent.name.full(middle='full')} can choose any person as a delegate.: anyone
        help: |
          ${your_subject} acting agent can amend or revoke that delegation at any time. 
      - They can only delegate to someone that ${i_subject} will authorize.: authorized
  - Who ${do_does} ${you_subject} authorize as delegate?: delegate.name.first
    maxlength: 50
    js show if: 
      val("delegate_decisions") === "authorized"
---
template: delegate_meaning
subject: |
  **What does "delegating discretionary decision making powers" mean?**
content: |  
  As agent, ${agent.name.full(middle='full')} has the authority to employ other people necessary to carry out the powers granted in this form, but ${agent.name.full(middle='full')} will still have to make all the decisions.

  % if for_yourself == True:
  However, you may decide to give ${agent.name.full(middle='full')} the option to let others make decisions. This is called "delegating discretionary decision making powers."
  % else:
  However, ${principal.name.full(middle='full')} may decide to give ${agent.name.full(middle='full')} the option to let others make decisions. This is called "delegating discretionary decision making powers."
  % endif
---
id: agent compensation
question: |
  % if for_yourself == True:
  Do you want ${agent.name.full(middle='full')} to have the right to reasonable payment for services as your agent?
  % else:
  Does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to have the right to reasonable payment for services as their agent?
  % endif
subquestion: |  
  % if for_yourself:
  ${agent.name.full(middle='full')} will have the right to get paid back for all reasonable expenses as a result of carrying out this power of attorney.

  You can also give ${agent.name.full(middle='full')} the right to reasonable payment for services as agent.

  **Note:** this payment would come out of your own money. This is not a payment from an outside agency or other source.
  % else:
  ${agent.name.full(middle='full')} will have the right to get paid back for all reasonable expenses as a result of carrying out this power of attorney.

  They can also give ${agent.name.full(middle='full')} the right to reasonable payment for services as agent.

  **Note:** this payment would come out of ${principal.name.full(middle='full')}'s own money. This is not a payment from an outside agency or other source.
  % endif
fields:
  - no label: agent_compensation
    input type: radio
    choices:
      - No, ${agent.name.full(middle='full')} shall not be entitled to reasonable compensation for their services. They will only be entitled to reimbursement for reasonable expenses.: expenses_only
      - Yes, ${agent.name.full(middle='full')} will be entitled to reasonable compensation at their discretion.: discretion
      - Yes, ${agent.name.full(middle='full')} will be entitled to reasonable compensation, within limits.: with_limits
  - Compensation will be no more than: compensate_amount
    datatype: currency
    min: 0.01
    js show if: 
      val("agent_compensation") === "with_limits"
  - Frequency of compensation: compensate_time
    input type: radio
    js show if: 
      val("agent_compensation") === "with_limits"
    choices:
      - Hourly
      - Daily
      - Weekly
      - Monthly
---
id: any successors
question: |
  % if for_yourself == True:
  Do you want to name successor agents?
  % else:
  Does ${principal.name.full(middle='full')} want to name successor agents?
  % endif
subquestion: |
  % if for_yourself == True:
  The person named as a **{successor agent}** will have power of attorney for property for you if ${agent.name.full(middle='full')} dies, becomes **{incompetent}**, quits, or refuses to act as your power of attorney agent.
  
  If you list more than one successor agent, you should list them in order of preference
  % else:
  The person named as a successor agent will have power of attorney for property for ${principal.name.full(middle='full')} if ${agent.name.full(middle='full')} dies, becomes **{incompetent}**, quits, or refuses to accept the office of agent.
  
  If ${principal.name.full(middle='full')} lists more than one successor agent, they should list them in order of preference.
  % endif
fields:
  - no label: any_successors
    datatype: yesnoradio
terms:
  incompetent: |
    **Incompetent** means unable to handle one's own affairs due to illness, disability, or age. A person can be declared incompetent or legally disabled by a court. A person may be certified by a doctor as unable to make decisions or handle business affairs.
  successor agent: |
    A **successor agent** is a back-up agent who will act as your agent if your first agent is unavailable, passes away, or stops being your agent.
---
code: |
  successors[i].name.first
  successors[i].in_america
  successors[i].phone_number
  successors[i].complete = True
---
id: any other successors
question: |
  % if for_yourself == True:
  Do you want to name another successor agent?
  % else:
  Does ${principal.name.full(middle='full')} want to name another successor agent?
  % endif
subquestion: |
  So far you have told us about ${comma_and_list(successors.full_names())}.

  If you name another successor agent, they would only have power if both ${agent.name.full(middle='full')} and the successors you've already entered are unavailable to act.
fields:
  - "Anyone else?": successors.there_is_another
    datatype: yesnoradio
---
id: names of successors
question: |
  % if i == 0:
  What is the successor's name?
  % else:
  What is the ${ordinal(i)} successor's name?
  % endif
fields:
  - First: successors[i].name.first
  - Middle: successors[i].name.middle
    required: False
  - Last: successors[i].name.last
  - Suffix: successors[i].name.suffix
    code: |
      name_suffix()
    required: False  
---
id: successor address
sets:
  - successors[i].in_america
question: |
  Enter ${successors[i].name.full(middle='full')}'s address
subquestion: |
  ${collapse_template(success_intl_address_help)}
fields:
  - Does ${successors[i].name.full(middle='full')} have a United States address?: successors[i].in_america
    datatype: yesnoradio
    default: True
    help: |
      Click **No** if you want to list an address outside the United States. You should enter the international address using the English alphabet.
  - Street address: successors[i].address.address
    address autocomplete: True
    required: False
    show if: successors[i].in_america
  - Address line 2: successors[i].address.unit
    required: False
    show if: successors[i].in_america
  - City: successors[i].address.city
    show if: successors[i].in_america
  - State: successors[i].address.state
    show if: successors[i].in_america
    code: |
      states_list() 
  - ZIP code: successors[i].address.zip  
    required: False
    show if: successors[i].in_america
  - Non-US address line 1 (street address, apartment number): successors[i].intl_address_1
    required: False
    show if: 
      variable: successors[i].in_america
      is: False
  - Non-US address line 2 (city, province or state, postal code, country): successors[i].intl_address_2
    show if: 
      variable: successors[i].in_america
      is: False
---
template: success_intl_address_help
subject: |
  **What if my sucessor agent does not have a United States address?**
content: |
  You are able to list someone outside of the United States as your agent. Your successor  agent does not need to be a United States citizen. However, there may issues if a bank or financial organization is unable to reach them. You may want to ask a lawyer for advice. Use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help) to find free or low-cost legal services in your area.
  
  For international addresses, there will be space for two lines to enter the address. You should enter the international address using the English alphabet.
---
id: successor phone
sets:
  - successors[i].phone_number
question: |
  What is ${successors[i].name.full(middle='full')}'s phone number?
subquestion: |
  % if for_yourself:
   A valid phone number is required so your successor agent can be contacted.
  % else:
   A valid phone number is required so ${principal.name.full(middle='full')}'s successor agent can be contacted.
   % endif
fields:
  - Phone number: successors[i].phone_number
    datatype: al_international_phone
---
template: video_when_effect
subject: |
  **Video: When does a POA for Property go into effect?**
content: |
  [YOUTUBE -1pMMIe4hb4]
---
id: effective date option
question: |
  % if for_yourself == True:
  When do you want this Power of Attorney to go into effect?
  % else:
  When does ${principal.name.full(middle='full')} want this Power of Attorney to go into effect?
  % endif
subquestion: |
  ${collapse_template(video_when_effect)}
  
  % if for_yourself == True:
  This Power of Attorney will go into effect when you sign the form unless you state that it should take effect at a later time.
  
  You will still have the authority to make decisions. ${agent.name.full(middle='full')} will be able to make decisions for you when you are unable to.

  You can still change your mind and **{revoke}** the Power of Attorney after you sign it, as long as you have the required **{legal capacity}**.
  % else:
  This Power of Attorney will go into effect when ${principal.name.full(middle='full')} signs the form unless they state that it should take effect at a later time.
  
  ${principal.name.full(middle='full')} will still have the authority to make decisions. ${agent.name.full(middle='full')} will be able to make decisions for them when they are unable to.

  This Power of Attorney will go into effect when ${principal.name.full(middle='full')} signs the form unless they state that it should take effect at a later time.
  
  They will still have the authority to make decisions. ${agent.name.full(middle='full')} will be able to make decisions for them when they are unable to.

  ${principal.name.full(middle='full')} can still change their mind and **{revoke}** the Power of Attorney after they sign it, as long as they have the required **{legal capacity}**.
  % endif
fields:
  - no label: effective_date_choice
    input type: radio
    choices:
      - Immediately.: immediately
      - Only during times when a doctor has decided that ${i_subject} cannot make decisions for ${myself_their_self}.: doctor
        help: |
          % if for_yourself:
          If you choose this, ${agent.name.full(middle='full')} will have authority as your personal representative under HIPAA to speak with your doctor and request a written statement whether or not you can make financial decisons.
          % else:
          If ${principal.name.full(middle='full')} chooses this, ${agent.name.full(middle='full')} will have authority as their personal representative under HIPAA to speak with their doctor and request a written statement whether or not they can make financial decisons.
          % endif
      - Only if ${i_subject} ${am_is} arrested, detained, or deported by law enforcement and ${i_they} ${am_are} unable to make financial decisions: detained
      - At another time. I will explain below.: other
  - "This power of attorney shall become effective on:": effective_date_text
    input type: area
    maxlength: 250
    js show if:
      val("effective_date_choice") === "other"
terms:
  revoke: |
    To **revoke** a Power of Attorney means to undo, destroy, or void it.
  legal capacity: |
    ${capitalize(you_subject)} ${have_has} the **legal capacity** to revoke a Power of Attorney for Property if 
    
       * ${capitalize(you_they)} understand what revoking the Power of Attorney will do, and 
       * ${capitalize(you_they)} know ${your_their} income and property.
---
id: effective date
question: |
  % if for_yourself == True:
  When do you want the Power of Attorney to take effect?
  % else:
  When does ${principal.name.full(middle='full')} want the Power of Attorney to take effect?
  % endif
subquestion: |
  % if for_yourself == True:
  To make the Power of Attorney take effect at a later time, you must give a date or event when it should start.
  % else:
  To make the Power of Attorney take effect at a later time, ${principal.name.full(middle='full')} must give a date or event when it should start.
  % endif
  
  The event chosen must be limited to a specific future date or occurrence. The event chosen should also be as specific as possible.

  As an example, the event 'the birth of my child' is not specific. Instead, the event should specify which child: 'the birth of my first child.'
fields:
  - "This power of attorney shall become effective on...": effective_date
    input type: area
---
template: video_when_end
subject: |
  **Video: When does my Power of Attorney end?**
content: |
  [YOUTUBE -1pMMIe4hb4]
---
id: revocation option
question: |
  % if for_yourself == True:
  Do you want this Power of Attorney to last until your death?
  % else:
  Does ${principal.name.full(middle='full')} want this Power of Attorney to last until their death?
  % endif
subquestion: |
  ${collapse_template(video_when_end)}
  
  % if for_yourself == True:
  This Power of Attorney for Property will last until your death. However, you may choose to end it earlier.
  % else:
  This Power of Attorney for Property will last until ${principal.name.full(middle='full')}'s death. However, they may choose to end it earlier.
  % endif
  
  ${collapse_template(revoke_later)}
fields:
  - no label: end_at_death
    datatype: yesnoradio
---
template: revoke_later
subject: |
  **How does someone end a Power of Attorney early?**
content: |  
  They can create a Power of Attorney Revocation to end a Power of Attorney.
  
  To make a Power of Attorney Revocation, use ILAO's [**Power of Attorney Revocation Easy Form**](https://www.illinoislegalaid.org/legal-information/power-attorney-revocation).
---
id: revocation
question: |
  % if for_yourself == True:
  When do you want the Power of Attorney to end?
  % else:
  When does ${principal.name.full(middle='full')} want the Power of Attorney to end?
  % endif
subquestion: |
  % if for_yourself == True:
  To make the Power of Attorney end before your death, you must give a date or an event upon which the Power of Attorney will end.

  For example, the Power of Attorney could end upon a court determination of your disability.
  % else:
  To make the Power of Attorney end before ${principal.name.full(middle='full')}'s death, they must give a date or an event upon which the Power of Attorney will end.

  For example, the Power of Attorney could end upon a court determination of their disability.
  % endif
fields:
  - no label: end_date_choice
    input type: radio
    choices:
       - When ${agent.name.full(middle='full')} gets a note from ${my_subject} doctor that says ${i_they} can manage ${my_their} financial affairs.: doctor
       - When ${i_subject} ${have_has} been released from custody: custody
       - Other: other
  - This power of attorney shall terminate on:: end_date_text
    input type: area
    js show if:
      val("end_date_choice") === "other"
---
id: agent as guardian
question: |
  % if for_yourself == True:
  Do you want to nominate ${agent.name.full(middle='full')} as your legal guardian, if needed?
  % else:
  Does ${principal.name.full(middle='full')} want to nominate ${agent.name.full(middle='full')} as their legal guardian, if needed?
  % endif
subquestion: |
  To "nominate" means to suggest or propose a person a court can choose to act as guardian.

  % if for_yourself == True:
  A court may find it necessary to appoint a legal guardian to manage your health and well-being. A guardian is able to make decisions on matters other than health care and would typically have rights, powers, and duties over you similar to the ones parents have over their minor children. 
  % else:
  A court may find it necessary to appoint a legal guardian to manage ${principal.name.full(middle='full')}'s health and well-being. A guardian is able to make decisions on matters other than health care and would typically have rights, powers, and duties over ${principal.name.full(middle='full')} similar to the ones parents have over their minor children
  % endif
  
  If you click **No**, then a court may appoint someone other than ${agent.name.full(middle='full')} to be guardian if needed. Even if you click **Yes**, a court may still appoint someone else as guardian if they find that ${agent.name.full(middle='full')} is breaching their duty.
fields:
  - no label: is_guardian
    datatype: yesnoradio
---
id: include preparer
question: |
  Do you want to include your name and address as the preparer of the form?
subquestion: |
  You do not have to include your information. However, you may be asked to answer questions about the Power of Attorney if ${principal.name.full(middle='full')} cannot do so.
fields:
  - no label: include_preparer
    datatype: yesnoradio 
---
id: preparer name
question: |
  What is your name?
fields:
  - First: preparer.name.first
  - Middle: preparer.name.middle
    required: False
  - Last: preparer.name.last
  - Suffix: preparer.name.suffix
    required: False
---
id: preparer address
question: |
  What is your address?
subquestion: |
  If you do not want to include your address, leave this blank.
fields:
  - Street address: preparer.address.address
    required: False
    address autocomplete: True
  - Address line 2: preparer.address.unit
    required: False
  - City: preparer.address.city
    required: False
  - State: preparer.address.state
    required: False
    code: |
      states_list() 
  - ZIP code: preparer.address.zip
    required: False
---
id: preparer phone
question: |
  What is your phone number?
subquestion: |
  If you do not want to include your phone number, leave this blank.
fields:
  - Phone number: preparer.phone_number
    datatype: al_international_phone
    required: False
---
id: forms assembling
continue button field: forms_assembling
question: |
  Almost done
subquestion: |
  After you click **Next**, it may take a few moments to finish making your forms.
  
  ###### You do not need to refresh your screen. Hang in there!
  
  [NEWLINE]
---
template: video_congrats
subject: |
  **Video: Congratulations and call to action**
content: |
  [YOUTUBE -1pMMIe4hb4]
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  [YOUTUBE -1pMMIe4hb4]
  
  Your forms are ready. View and download your forms below. Click **Make changes** to fix any mistakes.
  
  The Instructions page has important information. You can read it to find out what to do next. The Power of Attorney form has additional instructions. 
  
  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }

  ${ al_user_bundle.download_list_html() }
 
  &nbsp;

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }
  
  **Note:** This program does not send your form. You will need to do this yourself.

  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} **Sign-in**](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif

 
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=user_info().question_id, easy_form_variable=user_info().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  Power of attorney for property
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [Illinois Legal Aid Online](https://www.illinoislegalaid.org)
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions, poa_property, ssa_release], filename="power_of_attorney_for_property.pdf", title="All forms", enabled=True)
  - al_court_bundle: ALDocumentBundle.using(elements=[instructions, poa_property, ssa_release], filename="power_of_attorney_for_property.pdf", title="All forms", enabled=True)
---
attachment:
  - name: poa_property
    variable name: poa_property[i]
    filename: power_of_attorney_for_property
    docx template file: poa_property_statutory_shortform_word_version.docx
---
attachment:
  - name: instructions
    variable name: instructions[i]
    filename: instructions
    docx template file: instructions_poa_property.docx
---
reconsider: True
code: |
  release_reason = ""
  release_reason += agent.name.full(middle='full')
  release_reason += " is my agent with power of attorney for property."
  if any_successors:
    release_reason += " "
    if successors.number_gathered() > 1:      
      release_reason += successors[0].name.full(middle='full')
      release_reason += " and "
      release_reason += successors[1].name.full(middle='full')
      release_reason += " are my successor agents."
    elif successors.number_gathered() > 0:
      release_reason += successors[0].name.full(middle='full')
      release_reason += " is my successor agent."
  release_logic = True
---
attachment:
  - name: ssa_release
    variable name: ssa_release[i]
    filename: ssa_release
    pdf template file: ssa_release.pdf
    skip undefined: True
    editable: True
    fields:
      - "principal_name": ${ principal.name.full(middle='full') }
      - "principal_address": ${ principal.address.on_one_line(bare=True)}
      - "principal_birth": ${birth_date}
      - "principal_ssn": ${""}
      - "principal_phone": ${phone_number_formatted(principal_phone)}
      - "agent_name": ${ agent.name.full(middle='full')}
      - "agent_phone": ${ phone_number_formatted(agent.phone_number) }
      - "success_agent_name_1": ${successors[0].name.full(middle='full')}
      - "successor_agent_phone_1": ${ phone_number_formatted(successors[0].phone_number) }
      - "successor_agent_name_2": ${successors[1].name.full(middle='full')}
      - "successor_agent_phone_2": ${ phone_number_formatted(successors[1].phone_number) }
      - "release_reason": ${release_reason}
      - "verify_number": ${ssa_info['verify']}
      - "monthly_payment": ${ssa_info['current_benefit']}
      - "monthly_supplemental": ${ssa_info['current_supplement']}
      - "benefits_date_check": ${ssa_info['past_benefits']}
      - "benefit_start_date": ${benefit_start_date if ssa_info['past_benefits'] else ""}
      - "benefit_end_date": ${benefit_end_date if ssa_info['past_benefits'] else ""}
      - "supplemental_dates_check": ${ssa_info['past_supplement']}
      - "supplemental_start_date": ${supplemental_start_date if ssa_info['past_supplement'] else ""}
      - "supplemental_end_date": ${supplemental_end_date if ssa_info['past_supplement'] else ""}
      - "medicare_date_check": ${ssa_info['medicare']}
      - "medicare_start_date": ${medicare_start_date if ssa_info['medicare'] else ""}
      - "medicare_end_date": ${medicare_end_date if ssa_info['medicare'] else ""}
      - "medical_records_date_check": ${True if ssa_info['medical'] and complete_or_dates == "dates" else False}
      - "medical_records_start_date": ${medical_records_start_date if ssa_info['medical'] and complete_or_dates == "dates" else ""}
      - "medical_records_end_date": ${medical_records_end_date if ssa_info['medical'] and complete_or_dates == "dates" else ""}
      - "complete_medical_records": ${True if ssa_info['medical'] and complete_or_dates == "complete" else False}
      - "other_records_check": ${ssa_info['other']}
      - "other_records_text": ${other_records_text if ssa_info['other'] else""}
---
objects:
  - poa_property: ALDocument.using(title="Power of attorney for property", filename="poa_property", enabled=True, has_addendum=False)
  - instructions: ALDocument.using(title="Instructions", filename="instructions", enabled=True, has_addendum=False)
  - ssa_release: ALDocument.using(title="Consent for release of information - Social Security Administration", filename="ssa_release", has_addendum=False)
---
code: |
  if which_powers['social'] and ssn_authority:
    ssa_release.enabled = True
  else:
    ssa_release.enabled = False
---
id: review screen
event: review_answers
question: |
  Review screen
subquestion: |
  Edit your answers below.
review: 
  - Edit: for_yourself
    button: |
      **You are making these forms for:**
      % if for_yourself == True:
      Myself
      % else:
      Someone else
      % endif
  - Edit: principal.name.first
    button: |
      % if for_yourself == True:
      **Your name:**
      % else:
      **The principal's name:**
      % endif
      ${principal.name.full(middle="full")}
  - Edit: principal.address.address
    button: |
      % if for_yourself == True:
      **Your address:**
      % else:
      **${principal.name.full(middle='full')}'s address:**
      % endif
      ${principal.address.on_one_line(bare=True)}
  - Edit: agent.name.first
    button: |
      **The agent's name:**
      ${agent.name.full(middle='full')}
  - Edit: agent.in_america
    button: |
      **${agent.name.full(middle='full')}'s address:**
      % if agent.in_america == True:
      ${agent.address.on_one_line(bare=True)}
      % else:
      ${agent.intl_address_1}, ${agent.intl_address_2}
      % endif
  - Edit: agent.phone_number
    button: |
      **${agent.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(agent.phone_number)}
  - Edit: which_powers
    button: |
      **${agent.name.full(middle='full')} will have power over:**
      
      % if which_powers['real'] == True:
      * Real estate transactions
      % endif
      % if which_powers['financial'] == True:
      * Financial institution transactions
      % endif
      % if which_powers['stock'] == True:
      * Stock and bond transactions
      % endif
      % if which_powers['tangible'] == True:
      * Tangible personal property transactions
      % endif
      % if which_powers['safe'] == True:
      * Safe deposit transactions
      % endif
      % if which_powers['insurance'] == True:
      * Insurance and annuity transactions
      % endif
      % if which_powers['retirement'] == True:
      * Retirement plan transactions
      % endif
      % if which_powers['social'] == True:
      * Social Security, employment and military service benefits
      % endif
      % if which_powers['tax'] == True:
      * Tax matters
      % endif
      % if which_powers['claims'] == True:
      * Claims and litigation
      % endif
      % if which_powers['commodity'] == True:
      * Commodity and option transactions
      % endif
      % if which_powers['business'] == True:
      * Business operations
      % endif
      % if which_powers['borrowing'] == True:
      * Borrowing transactions
      % endif
      % if which_powers['estate'] == True:
      * Estate transactions
      % endif
      % if which_powers['all'] == True:
      * All other property powers and transactions
      % endif
  - Edit: life_insurance
    button: |
      **Does ${agent.name.full(middle='full')} have the power to change life insurance beneficiaries?**
      ${word(yesno(life_insurance))}
  - Edit: file_bankruptcy
    button: |
      **Does ${agent.name.full(middle='full')} have the power to file for bankruptcy?**
      ${word(yesno(file_bankruptcy))}    
  - Edit: is_guardian
    button: |
      % if for_yourself == True:
      **Do you want ${agent.name.full(middle='full')} to serve as your legal guardian?**
      % else:
      **Does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to serve as their legal guardian?**
      % endif
      ${word(yesno(is_guardian))}
  - Edit: ssn_authority
    button: |
      **Does ${agent.name.full(middle='full')} have the authority to discuss things with the Social Security Administration?**
      ${word(yesno(ssn_authority))}
    show if: which_powers['social']
  - Edit: ssa_info
    button: |
      **What information should the Social Security Administration release?**

      % if ssa_info['verify']:
      * Verification of Social SEcurity Number
      % endif
      % if ssa_info['current_benefit']:
      * Current monthly Social Security benefit amount
      % endif
      % if ssa_info['current_supplement']:
      * Current montly Supplemental Security income payment amount
      % endif
      % if ssa_info['past_benefits']:
      * Past Social Security benefit amounts
      % endif
      % if ssa_info['past_supplement']:
      * Past Supplemental Security Income payment amounts
      % endif
      % if ssa_info['medicare']:
      * Medicare entitlement
      % endif
      % if ssa_info['medical']:
      * Medical records
      % endif
      % if ssa_info['other']:
      * ${other_records_text}
      % endif
    show if: which_powers['social'] and ssn_authority
  - Edit: principal_phone
    button: |
      % if for_yourself:
      **Your phone number:**
      % else:
      **${principal.name.full(middle='full')}'s phone number:**
      % endif
      ${phone_number_formatted(principal_phone)}
    show if: which_powers['social'] and ssn_authority
  - Edit: birth_date
    button: |
      % if for_yourself == True:
      **Your birth date:**
      % else:
      **${principal.name.full(middle='full')}'s birth date:**
      % endif
      ${birth_date}
  - Edit: agent_limitations
    button: |
      **Are ${agent.name.full(middle='full')}'s powers limited?**
      ${word(yesno(agent_limitations))}
  - Edit: agent_limits
    button: |
      **Limits on ${agent.name.full(middle='full')}'s power:**
      ${agent_limits}
    show if: agent_limitations
  - Edit: additional_powers
    button: |
      % if additional_powers.all_false():
      **${agent.name.full(middle='full')} is not granted any additional powers.**
      % else:
      **${agent.name.full(middle='full')} is granted these additional powers:**

      % if additional_powers['gifts']:
      * The power to give my property to others as gifts.
      % endif
      % if additional_powers['appointment']:
      * The power to exercise powers of appointment.
      % endif
      % if additional_powers['name']:
      * The power to name or change beneficiaries or joint tenants.
      % endif
      % if additional_powers['social']:
      * The right to access my social media accounts.
      % endif
      % if additional_powers['online']:
      * The right to access my online accounts, such as online banking, utilities, and bill pay.
      % endif
      % if additional_powers['trust']:
      * The power to revoke or amend the trust named ${trust_name}.
      % endif
      % if additional_powers['other']:
      * ${additional_powers_text}
      % endif
      % endif
  - Edit: delegate_decisions
    button: |
      **Can ${agent.name.full(middle='full')} delegate decision making powers?**
      % if delegate_decisions == "agent_only":
      No
      % elif delegate_decisions == "anyone":
      Yes, to anyone they choose.
      % elif delegate_decisions == "authorized":
      Yes, to ${delegate.name.full(middle='full')}.
      % endif
  - Edit: agent_compensation
    button: |
      **Will ${agent.name.full(middle='full')} be paid?**
      % if agent_compensation == "expenses_only":
      Only for reasonable expenses.
      % elif agent_compensation == "with_limits":
      Yes, no more than ${compensate_amount} ${compensate_time}.
      % else:
      Yes, at their discretion.
      % endif
  - Edit: any_successors
    button: |
      % if for_yourself == True:
      **Do you want to name successor agents?**
      % else:
      **Does ${principal.name.full(middle='full')} want to name successor agents?**
      % endif
      ${word(yesno(any_successors))}
  - Edit: successors.revisit
    button: |
      **Successors: (Edit to change names, addresses, and phone numbers)**

      % for person in successors:
        * ${ person.name.full(middle="full") }
      % endfor
  - Edit: effective_date_choice
    button: |
      **This Power of Attorney will take effect:**
      % if effective_date_choice == "immediately":
      Immediately
      % elif effective_date_choice == "doctor":
      Only during times when a doctor has decided that ${i_subject} cannot make decisions for ${myself_their_self}.
      % elif effective_date_choice == "detained":
      Only if ${i_subject} ${am_is} arrested, detained, or deported.
      % elif effective_date_choice == "other":
      ${effective_date_text}
      % endif
  - Edit: end_at_death
    button: |
      % if for_yourself == True:
      **Will this Power of Attorney last until your death?**
      % else:
      **Will this Power of Attorney last until ${principal.name.full(middle='full')}'s death?**
      % endif
      ${word(yesno(end_at_death))}
  - Edit: end_date_choice
    button: |
      **This power of attorney shall terminate:**
      % if end_date_choice == "doctor":
      When ${agent.name.full(middle='full')} gets a note from ${my_subject} doctor that ${i_they} can manage ${my_their} financial affairs.
      % elif end_date_choice == "custody":
      When ${i_subject} ${have_has} been released from custody.
      % elif end_date_choice == "other":
      On ${end_date_text}.
      % endif
    show if: end_at_death == False
  - Edit: include_preparer
    button: |
      **Do you want to include your name and contact information?**
    show if: for_yourself == False
  - Edit: preparer.name.first
    button: |
      **Your name:**
      ${preparer.name.full(middle='full')}
    show if: for_yourself == False and include_preparer == True
  - Edit: preparer.address.address
    button: |
      **Your address:**
      ${preparer.address.on_one_line()}
    show if: for_yourself == False and include_preparer == True
  - Edit: preparer.phone_number
    button: |
      **Your phone number:**
      ${phone_number_formatted(preparer.phone_number)}
    show if: for_yourself == False and include_preparer == True
---
section: Principal
id: principal review section
event: section_principal
question: |
  Principal
subquestion: |
  Edit your answers below.
review:
  - Edit: for_yourself
    button: |
      **You are making these forms for:**
      % if for_yourself == True:
      Myself
      % else:
      Someone else
      % endif
  - Edit: principal.name.first
    button: |
      % if for_yourself == True:
      **Your name:**
      % else:
      **The principal's name:**
      % endif
      ${principal.name.full(middle="full")}
  - Edit: principal.address.address
    button: |
      % if for_yourself == True:
      **Your address:**
      % else:
      **${principal.name.full(middle='full')}'s address:**
      % endif
      ${principal.address.on_one_line(bare=True)} 
  - Edit: preparer.name.first
    button: |
      **Your name:**
      ${preparer.name.full(middle='full')}
    show if: for_yourself == False
  - Edit: preparer.address.address
    button: |
      **Your address:**
      ${preparer.address.on_one_line()}
    show if: for_yourself == False
  - Edit: preparer.phone_number
    button: |
      **Your phone number:**
      ${phone_number_formatted(preparer.phone_number)}
    show if: for_yourself == False
---
section: Agent
id: agent review screen
event: section_agent
question: |
  Agent
subquestion: |
  Edit your answers below.
review:
  - Edit: agent.name.first
    button: |
      **The agent's name:**
      ${agent.name.full(middle='full')}
  - Edit: agent.in_america
    button: |
      **${agent.name.full(middle='full')}'s address:**
      % if agent.in_america == True:
      ${agent.address.on_one_line(bare=True)}
      % else:
      ${agent.intl_address_1}, ${agent.intl_address_2}
      % endif
  - Edit: agent.phone_number
    button: |
      **${agent.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(agent.phone_number)}
---
section: Powers
id: powers review screen
event: section_powers
question: |
  Powers
subquestion: |
  Edit your answers below.
review:
  - Edit: which_powers
    button: |
      **${agent.name.full(middle='full')} will have power over:**
      
      % if which_powers['real'] == True:
      * Real estate transactions
      % endif
      % if which_powers['financial'] == True:
      * Financial institution transactions
      % endif
      % if which_powers['stock'] == True:
      * Stock and bond transactions
      % endif
      % if which_powers['tangible'] == True:
      * Tangible personal property transactions
      % endif
      % if which_powers['safe'] == True:
      * Safe deposit transactions
      % endif
      % if which_powers['insurance'] == True:
      * Insurance and annuity transactions
      % endif
      % if which_powers['retirement'] == True:
      * Retirement plan transactions
      % endif
      % if which_powers['social'] == True:
      * Social Security, employment and military service benefits
      % endif
      % if which_powers['tax'] == True:
      * Tax matters
      % endif
      % if which_powers['claims'] == True:
      * Claims and litigation
      % endif
      % if which_powers['commodity'] == True:
      * Commodity and option transactions
      % endif
      % if which_powers['business'] == True:
      * Business operations
      % endif
      % if which_powers['borrowing'] == True:
      * Borrowing transactions
      % endif
      % if which_powers['estate'] == True:
      * Estate transactions
      % endif
      % if which_powers['all'] == True:
      * All other property powers and transactions
      % endif
  - Edit: life_insurance
    button: |
      **Does ${agent.name.full(middle='full')} have the power to change life insurance beneficiaries?**
      ${word(yesno(life_insurance))}
  - Edit: file_bankruptcy
    button: |
      **Does ${agent.name.full(middle='full')} have the power to file for bankruptcy?**
      ${word(yesno(file_bankruptcy))}    
  - Edit: is_guardian
    button: |
      % if for_yourself == True:
      **Do you want ${agent.name.full(middle='full')} to serve as your legal guardian?**
      % else:
      **Does ${principal.name.full(middle='full')} want ${agent.name.full(middle='full')} to serve as their legal guardian?**
      % endif
      ${word(yesno(is_guardian))}
  - Edit: ssn_authority
    button: |
      **Does ${agent.name.full(middle='full')} have the authority to discuss things with the Social Security Administration?**
      ${word(yesno(ssn_authority))}
    show if: which_powers['social']
  - Edit: ssa_info
    button: |
      **What information do you want the Social Security Administration to release?**

      % if ssa_info['verify']:
      * Verification of Social SEcurity Number
      % endif
      % if ssa_info['current_benefit']:
      * Current monthly Social Security benefit amount
      % endif
      % if ssa_info['current_supplement']:
      * Current montly Supplemental Security income payment amount
      % endif
      % if ssa_info['past_benefits']:
      * Past Social Security benefit amounts
      % endif
      % if ssa_info['past_supplement']:
      * Past Supplemental Security Income payment amounts
      % endif
      % if ssa_info['medicare']:
      * Medicare entitlement
      % endif
      % if ssa_info['medical']:
      * Medical records
      % endif
      % if ssa_info['other']:
      * ${other_records_text}
      % endif
    show if: which_powers['social'] and ssn_authority
  - Edit: principal_phone
    button: |
      % if for_yourself:
      **Your phone number:**
      % else:
      **${principal.name.full(middle='full')}'s phone number:**
      % endif
      ${phone_number_formatted(principal_phone)}
    show if: which_powers['social'] and ssn_authority
  - Edit: birth_date
    button: |
      % if for_yourself == True:
      **Your birth date:**
      % else:
      **${principal.name.full(middle='full')}'s birth date:**
      % endif
      ${birth_date}
  - Edit: agent_limitations
    button: |
      **Are ${agent.name.full(middle='full')}'s powers limited?**
      ${word(yesno(agent_limitations))}
  - Edit: agent_limits
    button: |
      **Limits on ${agent.name.full(middle='full')}'s power:**
      ${agent_limits}
    show if: agent_limitations
  - Edit: additional_powers
    button: |
      % if additional_powers.all_false():
      **${agent.name.full(middle='full')} is not granted any additional powers.**
      % else:
      **${agent.name.full(middle='full')} is granted these additional powers:**

      % if additional_powers['gifts']:
      * The power to give my property to others as gifts.
      % endif
      % if additional_powers['appointment']:
      * The power to exercise powers of appointment.
      % endif
      % if additional_powers['name']:
      * The power to name or change beneficiaries or joint tenants.
      % endif
      % if additional_powers['social']:
      * The right to access my social media accounts.
      % endif
      % if additional_powers['online']:
      * The right to access my online accounts, such as online banking, utilities, and bill pay.
      % endif
      % if additional_powers['trust']:
      * The power to revoke or amend the trust named ${trust_name}.
      % endif
      % if additional_powers['other']:
      * ${additional_powers_text}
      % endif
      % endif
  - Edit: delegate_decisions
    button: |
      **Can ${agent.name.full(middle='full')} delegate decision making powers?**
      % if delegate_decisions == "agent_only":
      No
      % elif delegate_decisions == "anyone":
      Yes, to anyone they choose.
      % elif delegate_decisions == "authorized":
      Yes, to ${delegate.name.full(middle='full')}.
      % endif
  - Edit: agent_compensation
    button: |
      **Will ${agent.name.full(middle='full')} be paid?**
      % if agent_compensation == "expenses_only":
      Only for reasonable expenses.
      % elif agent_compensation == "with_limits":
      Yes, no more than ${compensate_amount} ${compensate_time}.
      % else:
      Yes, at their discretion.
      % endif
---
id: successor review screen
continue button field: x.review_successor
generic object: ALIndividual
question: |
  Edit ${x.name.full(middle='full')}'s information
review: 
  - Edit: x.name.first
    button: |
      **Successor name:**
      ${ x.name.full(middle="full")  }
  - Edit: x.in_america
    button: |
      **${ x.name.full(middle="full") }'s address:**
      % if x.in_america == True:
      ${ x.address.on_one_line(bare=True) }
      % else:
      ${x.intl_address_1}, ${x.intl_address_2}
      % endif
  - Edit: x.phone_number
    button: |
      **${ x.name.full(middle="full") }'s phone number:**
      ${ phone_number_formatted(x.phone_number) }
---
section: Successor agents
id: successor agents review screen
event: section_successors
question: |
  Successor agents
subquestion: |
  Edit your answers below.
review:
  - Edit: any_successors
    button: |
      % if for_yourself == True:
      **Do you want to name successor agents?**
      % else:
      **Does ${principal.name.full(middle='full')} want to name successor agents?**
      % endif
      ${word(yesno(any_successors))}
  - Edit: successors.revisit
    button: |
      **Successors: (Edit to change names, addresses, and phone numbers)**

      % for person in successors:
        * ${ person.name.full(middle="full") }
      % endfor
---
section: Other information
id: other information review screen
event: section_other
question: |
  Other information
subquestion: |
  Edit your answers below.
review:
  - Edit: effective_date_choice
    button: |
      **This Power of Attorney will take effect:**
      % if effective_date_choice == "immediately":
      Immediately
      % elif effective_date_choice == "doctor":
      Only during times when a doctor has decided that ${i_subject} cannot make decisions for ${myself_their_self}.
      % elif effective_date_choice == "detained":
      Only if ${i_subject} ${am_is} arrested, detained, or deported.
      % elif effective_date_choice == "other":
      ${effective_date_text}
      % endif
  - Edit: end_at_death
    button: |
      % if for_yourself == True:
      **Will this Power of Attorney last until your death?**
      % else:
      **Will this Power of Attorney last until ${principal.name.full(middle='full')}'s death?**
      % endif
      ${word(yesno(end_at_death))}
  - Edit: end_at_death
    button: |
      % if for_yourself == True:
      **Will this Power of Attorney last until your death?**
      % else:
      **Will this Power of Attorney last until ${principal.name.full(middle='full')}'s death?**
      % endif
      ${word(yesno(end_at_death))}
  - Edit: end_date_choice
    button: |
      **This power of attorney shall terminate:**
      % if end_date_choice == "doctor":
      When ${agent.name.full(middle='full')} gets a note from ${my_subject} doctor that ${i_they} can manage ${my_their} financial affairs.
      % elif end_date_choice == "custody":
      When ${i_subject} ${have_has} been released from custody.
      % elif end_date_choice == "other":
      On ${end_date_text}.
      % endif
    show if: end_at_death == False
  - Edit: include_preparer
    button: |
      **Do you want to include your name and contact information?**
    show if: for_yourself == False
  - Edit: preparer.name.first
    button: |
      **Your name:**
      ${preparer.name.full(middle='full')}
    show if: for_yourself == False and include_preparer == True
  - Edit: preparer.address.address
    button: |
      **Your address:**
      ${preparer.address.on_one_line()}
    show if: for_yourself == False and include_preparer == True
  - Edit: preparer.phone_number
    button: |
      **Your phone number:**
      ${phone_number_formatted(preparer.phone_number)}
    show if: for_yourself == False and include_preparer == True
---
id: successors table
table: successors.table
rows: successors
columns:
  - Successor: |
      row_item.name.full(middle="full") if defined("row_item.name.first") else ""
  - Name, address, and phone number: |
      action_button_html(url_action(row_item.attr_name("review_successor")), label="Edit", icon="pencil-alt")
delete buttons: True
confirm: True
---
id: successors review screen
continue button field: successors.revisit
question: |
  Edit the information about the successors
subquestion: |
  ${ successors.table }

  ${ successors.add_action() }